#!/bin/bash

CURRENT_WINDOW_ID=$(xdotool getwindowfocus)
TELEGRAM_WINDOW_ID=$(xdotool search --class telegramdesktop | tail -n 1)

if [ $TELEGRAM_WINDOW_ID -eq $CURRENT_WINDOW_ID ]; then
    if [ $1 == "alt-j" ]; then
        xdotool windowactivate $TELEGRAM_WINDOW_ID key --clearmodifiers --window $TELEGRAM_WINDOW_ID Ctrl+Tab &> ~/ERROR
    fi

    if [ $1 == "alt-k" ]; then
        xdotool windowactivate $TELEGRAM_WINDOW_ID key --clearmodifiers --window $TELEGRAM_WINDOW_ID Ctrl+Shift+Tab &> ~/ERROR
    fi
else
    if [ $1 == "alt-j" ]; then
        xdotool key --clearmodifiers --window $CURRENT_WINDOW_ID Alt+j &> ~/ERROR
    fi

    if [ $1 == "alt-k" ]; then
        xdotool key --clearmodifiers --window $CURRENT_WINDOW_ID Alt+k &> ~/ERROR
    fi
fi
